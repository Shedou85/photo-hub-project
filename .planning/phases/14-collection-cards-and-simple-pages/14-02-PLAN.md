---
phase: 14-collection-cards-and-simple-pages
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/pages/SharePage.jsx
  - frontend/src/pages/DeliveryPage.jsx
  - frontend/src/constants/styles.js
  - frontend/src/pages/CollectionDetailsPage.jsx
autonomous: true

must_haves:
  truths:
    - "SharePage submit button uses Button primitive instead of inline gradient classes"
    - "DeliveryPage download-all button uses Button primitive instead of inline gradient classes"
    - "Photo grid responsive classes are imported from a shared constant, not duplicated inline"
    - "No inline bg-[linear-gradient(135deg,...)] classes remain on SharePage or DeliveryPage buttons"
  artifacts:
    - path: "frontend/src/constants/styles.js"
      provides: "PHOTO_GRID_CLASSES shared constant for responsive photo grid"
    - path: "frontend/src/pages/SharePage.jsx"
      provides: "SharePage with Button primitive replacing inline gradient button"
    - path: "frontend/src/pages/DeliveryPage.jsx"
      provides: "DeliveryPage with Button primitive replacing inline gradient button"
  key_links:
    - from: "frontend/src/pages/SharePage.jsx"
      to: "frontend/src/components/primitives/Button.jsx"
      via: "import Button"
      pattern: "import Button"
    - from: "frontend/src/pages/DeliveryPage.jsx"
      to: "frontend/src/components/primitives/Button.jsx"
      via: "import Button"
      pattern: "import Button"
    - from: "frontend/src/pages/SharePage.jsx"
      to: "frontend/src/constants/styles.js"
      via: "import PHOTO_GRID_CLASSES"
      pattern: "PHOTO_GRID_CLASSES"
    - from: "frontend/src/pages/DeliveryPage.jsx"
      to: "frontend/src/constants/styles.js"
      via: "import PHOTO_GRID_CLASSES"
      pattern: "PHOTO_GRID_CLASSES"
---

<objective>
Refactor SharePage and DeliveryPage to use Button primitive instead of inline gradient buttons, and extract duplicated photo grid classes to a shared constant.

Purpose: Satisfy QUALITY-07 (no Tailwind class duplication after 3rd usage) by replacing inline gradient buttons with the Button primitive from Phase 12 and extracting the responsive photo grid pattern used across 4 pages into a shared constant.
Output: Updated SharePage.jsx, DeliveryPage.jsx, CollectionDetailsPage.jsx, and new styles.js constant file.
</objective>

<execution_context>
@C:/Users/Marius/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Marius/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/14-collection-cards-and-simple-pages/14-RESEARCH.md
@frontend/src/components/primitives/Button.jsx
@frontend/src/pages/SharePage.jsx
@frontend/src/pages/DeliveryPage.jsx
@frontend/src/constants/breakpoints.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extract photo grid constant and refactor SharePage/DeliveryPage buttons</name>
  <files>
    frontend/src/constants/styles.js
    frontend/src/pages/SharePage.jsx
    frontend/src/pages/DeliveryPage.jsx
    frontend/src/pages/CollectionDetailsPage.jsx
  </files>
  <action>
**Create frontend/src/constants/styles.js:**
```js
/**
 * Responsive photo grid classes used across CollectionDetailsPage, SharePage, DeliveryPage.
 * 1 column mobile, 2 columns tablet, 3 columns desktop with 12px gap.
 */
export const PHOTO_GRID_CLASSES = 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3';
```

**SharePage.jsx refactor:**
- Add import: `import Button from '../components/primitives/Button'`
- Add import: `import { PHOTO_GRID_CLASSES } from '../constants/styles'`
- Replace photo grid div class (line 213): change `className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-10"` to `className={PHOTO_GRID_CLASSES + ' mb-10'}` (or use template literal: `` className={`${PHOTO_GRID_CLASSES} mb-10`} ``)
- Replace the inline submit button (lines 274-280) with:
  ```jsx
  <Button
    variant="primary"
    size="lg"
    onClick={submitSelections}
    disabled={isSubmitting}
    fullWidth
    className="sm:w-auto"
  >
    {isSubmitting ? t('share.submitting') : t('share.submitSelections', { count: selectedPhotoIds.size })}
  </Button>
  ```
  This removes the 18 inline Tailwind classes (bg-[linear-gradient(...)], hover:shadow-lg, hover:scale-[1.02], etc.) and replaces with the Button primitive which already handles all these styles.

**DeliveryPage.jsx refactor:**
- Add import: `import Button from '../components/primitives/Button'`
- Add import: `import { PHOTO_GRID_CLASSES } from '../constants/styles'`
- Replace photo grid div class (line 162): change `className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-10"` to `` className={`${PHOTO_GRID_CLASSES} mb-10`} ``
- Replace the inline "Download All as ZIP" button (lines 148-157) with:
  ```jsx
  <Button
    variant="primary"
    size="lg"
    onClick={() => downloadAllAsZip(deliveryToken)}
  >
    <svg className="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}>
      <path strokeLinecap="round" strokeLinejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
    </svg>
    {t('delivery.downloadAllAsZip')}
  </Button>
  ```
  This replaces the inline-flex + gradient button with the Button primitive. The Button component already includes `inline-flex items-center gap-2` so the SVG icon will be properly aligned.

**CollectionDetailsPage.jsx refactor:**
- Add import: `import { PHOTO_GRID_CLASSES } from '../constants/styles'`
- Find both instances of `"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"` (lines 833 and 963) and replace with `{PHOTO_GRID_CLASSES}` using template literal or concatenation if additional classes are present on the same element.
- If the grid div has no additional classes, use `className={PHOTO_GRID_CLASSES}`. If it has additional classes (like `mt-4`), use `` className={`${PHOTO_GRID_CLASSES} mt-4`} ``.

Note: Do NOT refactor lightbox buttons, navigation arrows, or other specialized UI in SharePage/DeliveryPage — only the primary action buttons that duplicate the Button primitive's gradient pattern. The lightbox buttons have unique styling (bg-white/20, translucent) that doesn't match any Button variant.
  </action>
  <verify>
- `cd frontend && npm run lint` — zero errors/warnings
- `cd frontend && npm run build` — successful production build
- Grep confirms no `bg-[linear-gradient(135deg` remains on button elements in SharePage.jsx or DeliveryPage.jsx
- Grep confirms `PHOTO_GRID_CLASSES` is imported in SharePage, DeliveryPage, CollectionDetailsPage
- Grep confirms no more than 1 instance of `grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3` remains inline (zero is ideal; the constant definition in styles.js is the single source of truth)
  </verify>
  <done>
- SharePage submit button uses Button primitive (QUALITY-07 satisfied — no inline gradient duplication)
- DeliveryPage download-all button uses Button primitive (QUALITY-07 satisfied)
- Photo grid responsive classes extracted to PHOTO_GRID_CLASSES shared constant (QUALITY-07 satisfied — used in 4 pages)
- All 4 pages (SharePage, DeliveryPage, CollectionDetailsPage, plus CollectionsListPage from Plan 01 which uses gap-6) reference shared grid constant where applicable
- npm run lint and npm run build pass
  </done>
</task>

</tasks>

<verification>
1. `cd frontend && npm run lint` — zero errors/warnings
2. `cd frontend && npm run build` — successful production build
3. Grep check: `grep -r "bg-\[linear-gradient" frontend/src/pages/SharePage.jsx frontend/src/pages/DeliveryPage.jsx` returns zero matches on button elements (gradient only appears in Button primitive)
4. Grep check: `grep -r "PHOTO_GRID_CLASSES" frontend/src/` confirms usage in SharePage, DeliveryPage, CollectionDetailsPage, and definition in constants/styles.js
5. Visual check: SharePage submit button still renders as blue-to-indigo gradient with proper disabled state
6. Visual check: DeliveryPage download button still renders as gradient with SVG icon aligned
</verification>

<success_criteria>
- frontend/src/constants/styles.js exists with PHOTO_GRID_CLASSES constant
- SharePage.jsx imports and uses Button primitive for submit button
- DeliveryPage.jsx imports and uses Button primitive for download-all button
- Both pages import and use PHOTO_GRID_CLASSES for photo grid
- CollectionDetailsPage.jsx imports and uses PHOTO_GRID_CLASSES for both photo grids
- No inline gradient button classes remain in SharePage or DeliveryPage
- npm run lint and npm run build pass
</success_criteria>

<output>
After completion, create `.planning/phases/14-collection-cards-and-simple-pages/14-02-SUMMARY.md`
</output>
