---
phase: 14-collection-cards-and-simple-pages
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/components/primitives/Badge.jsx
  - frontend/src/components/primitives/CollectionCard.jsx
  - frontend/src/pages/CollectionsListPage.jsx
  - frontend/src/locales/en.json
  - frontend/src/locales/lt.json
  - frontend/src/locales/ru.json
autonomous: true

must_haves:
  truths:
    - "Collection cards display edge-to-edge cover images with no padding around the image"
    - "Collection cards show title, date, photo count, and status badge overlaid on gradient"
    - "Collection cards have rounded-[16px] corners with hover elevation (shadow-lg + -translate-y-1)"
    - "Status badges display colored dot prefix (gray/blue/green/purple) matching status"
    - "DRAFT status collections show no badge; other statuses show badge with colored dot"
    - "All new UI strings use t() and exist in en.json, lt.json, ru.json"
  artifacts:
    - path: "frontend/src/components/primitives/CollectionCard.jsx"
      provides: "Reusable collection card with edge-to-edge cover image and gradient overlay"
    - path: "frontend/src/components/primitives/Badge.jsx"
      provides: "Badge component with showDot prop for colored dot prefix"
    - path: "frontend/src/pages/CollectionsListPage.jsx"
      provides: "CollectionsListPage using CollectionCard component instead of inline card markup"
  key_links:
    - from: "frontend/src/pages/CollectionsListPage.jsx"
      to: "frontend/src/components/primitives/CollectionCard.jsx"
      via: "import CollectionCard"
      pattern: "import CollectionCard"
    - from: "frontend/src/components/primitives/CollectionCard.jsx"
      to: "frontend/src/components/primitives/Badge.jsx"
      via: "import Badge with showDot prop"
      pattern: "Badge.*showDot"
---

<objective>
Create CollectionCard primitive component with edge-to-edge cover images, gradient overlay, and hover elevation. Update Badge with colored dot prefix. Refactor CollectionsListPage to use these components.

Purpose: Satisfy CARDS-01 through CARDS-05 requirements — collection cards use edge-to-edge cover images with gradient overlay for text legibility, rounded corners (16px), hover elevation, and status badges with colored dots.
Output: CollectionCard.jsx primitive, updated Badge.jsx, refactored CollectionsListPage.jsx, i18n keys in all 3 locales.
</objective>

<execution_context>
@C:/Users/Marius/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Marius/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/14-collection-cards-and-simple-pages/14-RESEARCH.md
@frontend/src/components/primitives/Badge.jsx
@frontend/src/components/primitives/Button.jsx
@frontend/src/pages/CollectionsListPage.jsx
@frontend/src/locales/en.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CollectionCard primitive and update Badge with colored dot</name>
  <files>
    frontend/src/components/primitives/CollectionCard.jsx
    frontend/src/components/primitives/Badge.jsx
  </files>
  <action>
**Badge.jsx update** — Add `showDot` prop (default false) for colored dot prefix:
- Change `inline-block` to `inline-flex items-center gap-1.5` in baseClasses
- Add `showDot` prop to function signature and JSDoc
- Add `dotColors` mapping: DRAFT=bg-gray-600, SELECTING=bg-blue-700, REVIEWING=bg-green-700, DELIVERED=bg-purple-700, DOWNLOADED=bg-purple-800
- When `showDot` is true, render `<span className={clsx('w-2 h-2 rounded-full', dotColors[status])} aria-hidden="true" />` before children
- Preserve existing `className` prop passthrough and backward compatibility (showDot defaults to false)

**CollectionCard.jsx** — Create new primitive component:
- Props: `id`, `name`, `createdAt`, `photoCount`, `status`, `coverImageUrl` (optional), `actions` (ReactNode)
- Uses `useTranslation` hook for i18n strings
- Outer div: `group relative bg-white rounded-[16px] overflow-hidden shadow-md hover:shadow-lg transition-all duration-300 hover:-translate-y-1`
- Cover image area: `<Link to={/collection/${id}}>` wrapping `aspect-[3/2]` container
  - If `coverImageUrl` exists: `<img>` with `w-full h-full object-cover`, `loading="lazy"`, `group-hover:scale-105` with 300ms transition
  - If no cover: fallback div with `bg-[linear-gradient(135deg,#3b82f6_0%,#6366f1_100%)]` showing first letter of name uppercase, white, text-5xl bold
- Gradient overlay: `absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent`
- Content overlay (absolute bottom-0): title (text-lg font-bold truncate drop-shadow-md), then flex row with photo count using `t('collections.photosCount', { count: photoCount })` and date formatted with `toLocaleDateString()`, separated by bullet character
- Hover overlay: `absolute inset-0 bg-black/30 opacity-0 group-hover:opacity-100 transition-opacity duration-300` centered `{t('collections.viewCollection')}` in white on dark pill
- Status badge: absolutely positioned `top-3 right-3 z-10` — only rendered when `status !== 'DRAFT'` — uses `<Badge status={status} showDot>{t('collections.status.' + status)}</Badge>`
- Actions section: `p-4 flex gap-2` containing `{actions}` ReactNode
- Import: Link from react-router-dom, useTranslation from react-i18next, Badge from './Badge'
- Add JSDoc with @param types and @example showing usage with Button actions

Note: Do NOT import or use clsx in CollectionCard — it does not need conditional class composition (no dynamic classes beyond status badge which is handled by Badge component).
  </action>
  <verify>
- Both files exist and have no syntax errors: `cd frontend && npx -y acorn --ecma2020 --module --allow-import-export-declarations src/components/primitives/Badge.jsx src/components/primitives/CollectionCard.jsx 2>&1 | head -5` (or use `npm run lint`)
- Badge still exports default function, has showDot prop with default false
- CollectionCard exports default function, imports Badge and Link
  </verify>
  <done>
- Badge component renders colored dot when showDot=true, preserves existing behavior when showDot=false
- CollectionCard component renders edge-to-edge cover image with gradient overlay, hover elevation, status badge with colored dot, and actions section
  </done>
</task>

<task type="auto">
  <name>Task 2: Refactor CollectionsListPage to use CollectionCard and update i18n</name>
  <files>
    frontend/src/pages/CollectionsListPage.jsx
    frontend/src/locales/en.json
    frontend/src/locales/lt.json
    frontend/src/locales/ru.json
  </files>
  <action>
**CollectionsListPage.jsx refactor:**
- Add import: `import CollectionCard from '../components/primitives/CollectionCard'`
- Add import: `import Button from '../components/primitives/Button'`
- Remove the `STATUS_BORDER` constant (lines 17-23) — no longer needed, status indication is via Badge inside CollectionCard
- Replace the inline `<button>` for "Create Collection" form submit (line 197-200) with `<Button variant="primary" type="submit">{t('collections.createBtn')}</Button>`
- Replace the entire inline card markup (lines 220-291 inside the collections.map) with:
  ```jsx
  <CollectionCard
    key={collection.id}
    id={collection.id}
    name={collection.name}
    createdAt={collection.createdAt}
    photoCount={collection.photoCount ?? 0}
    status={collection.status}
    coverImageUrl={collection.coverPhotoPath ? photoUrl(collection.coverPhotoPath) : null}
    actions={
      <>
        <Button
          variant="secondary"
          size="sm"
          onClick={() => handleShareCollection(collection.id, collection.shareId)}
          className="flex-1 min-h-[48px]"
        >
          <svg xmlns="http://www.w3.org/2000/svg" className="w-4 h-4 shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}>
            <path strokeLinecap="round" strokeLinejoin="round" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />
          </svg>
          {copiedId === collection.id ? t('collections.linkCopied') : t('collections.shareCollection')}
        </Button>
        <Button
          variant="danger"
          size="sm"
          onClick={() => handleDeleteCollection(collection.id)}
          disabled={deletingId === collection.id}
          className="flex-1 min-h-[48px]"
        >
          <svg xmlns="http://www.w3.org/2000/svg" className="w-4 h-4 shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}>
            <path strokeLinecap="round" strokeLinejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
          </svg>
          {t('collections.deleteCollection')}
        </Button>
      </>
    }
  />
  ```
- The grid wrapper stays as `grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6` (collection cards use gap-6 for breathing room between larger cards)
- Remove the `statusBorder` variable usage since it's no longer needed

**i18n updates** — Add `collections.photosCount` key to all 3 locale files (needed by CollectionCard):
- en.json: Add `"photosCount_one": "{{count}} photo"` and `"photosCount_other": "{{count}} photos"` inside the `"collections"` namespace (these may already exist in `collection` namespace as `photosCount_one`/`photosCount_other` — but the CollectionCard uses `collections` namespace since it's on the collections list page)
- lt.json: Add `"photosCount_one": "{{count}} nuotrauka"`, `"photosCount_few": "{{count}} nuotraukos"`, `"photosCount_other": "{{count}} nuotraukų"` inside `"collections"` namespace
- ru.json: Add `"photosCount_one": "{{count}} фото"`, `"photosCount_few": "{{count}} фото"`, `"photosCount_other": "{{count}} фото"` inside `"collections"` namespace

Note: `collections.viewCollection` already exists in en.json. Verify it exists in lt.json and ru.json; if not, add Lithuanian and Russian translations.
  </action>
  <verify>
- `npm run lint` passes from frontend/ directory
- CollectionsListPage no longer contains `STATUS_BORDER`, `rotate-[0.5deg]`, `border-2 border-blue-500`, or inline badge markup
- CollectionsListPage imports CollectionCard and Button
- grep for `photosCount` in all 3 locale files confirms keys exist
  </verify>
  <done>
- CollectionsListPage uses CollectionCard component for all collection cards
- Collection cards show edge-to-edge cover images with gradient overlay (CARDS-01, CARDS-02)
- Collection cards display title, date, photo count, and status badge (CARDS-03)
- Collection cards have rounded-[16px] corners and hover elevation (CARDS-04)
- Status badges show colored dots (CARDS-05)
- Action buttons use Button primitive with min-h-[48px] touch targets
- All i18n keys present in en.json, lt.json, ru.json (QUALITY-08)
  </done>
</task>

</tasks>

<verification>
1. `cd frontend && npm run lint` — zero errors/warnings
2. `cd frontend && npm run build` — successful production build
3. Visual check: CollectionsListPage shows collection cards with cover images filling the card, gradient overlay at bottom with white text, rounded-[16px] corners
4. Hover check: Cards lift with shadow-lg on hover, cover image zooms slightly
5. Status check: Non-DRAFT collections show Badge with colored dot in top-right corner
6. Touch target check: Share and Delete buttons have min-h-[48px] for mobile accessibility
7. i18n check: Switch language to LT and RU — photo count and status labels render in correct language
</verification>

<success_criteria>
- CollectionCard.jsx exists in primitives/ with edge-to-edge cover, gradient overlay, hover elevation, status badge
- Badge.jsx supports showDot prop with colored dot prefix for each status
- CollectionsListPage uses CollectionCard and Button primitives (no inline card markup)
- STATUS_BORDER constant and tilt animations removed from CollectionsListPage
- All 3 locale files contain collections.photosCount keys
- npm run lint and npm run build pass
</success_criteria>

<output>
After completion, create `.planning/phases/14-collection-cards-and-simple-pages/14-01-SUMMARY.md`
</output>
