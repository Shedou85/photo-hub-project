---
phase: 11-design-system-foundation
plan: 02
type: execute
wave: 2
depends_on: ["11-01"]
files_modified:
  - frontend/src/layouts/MainLayout.jsx
  - frontend/src/components/Accordion.jsx
  - frontend/src/pages/CollectionsListPage.jsx
  - frontend/src/pages/CollectionDetailsPage.jsx
  - frontend/src/pages/ProfilePage.jsx
  - frontend/src/pages/PaymentsPage.jsx
autonomous: true

must_haves:
  truths:
    - "MainLayout uses BREAKPOINTS import from shared constants instead of local BREAKPOINT constant"
    - "All repeated hardcoded hex colors in authenticated pages replaced with semantic color tokens"
    - "All hardcoded rounded-[10px] replaced with rounded (DEFAULT token) or rounded-sm/md/lg as appropriate"
    - "All hardcoded shadow-[...] replaced with shadow-sm/DEFAULT/md/lg/xl tokens"
    - "All hardcoded text-[Npx] replaced with text-xs/sm/base/lg/xl as appropriate from Major Third scale"
    - "No functional or visual regressions in authenticated pages"
  artifacts:
    - path: "frontend/src/layouts/MainLayout.jsx"
      provides: "Token-based styling with shared breakpoints"
      contains: "BREAKPOINTS"
    - path: "frontend/src/components/Accordion.jsx"
      provides: "Token-based card styling"
    - path: "frontend/src/pages/CollectionsListPage.jsx"
      provides: "Token-based collection cards and forms"
    - path: "frontend/src/pages/CollectionDetailsPage.jsx"
      provides: "Token-based collection details styling"
    - path: "frontend/src/pages/ProfilePage.jsx"
      provides: "Token-based profile page styling"
    - path: "frontend/src/pages/PaymentsPage.jsx"
      provides: "Token-based payments page styling"
  key_links:
    - from: "frontend/src/layouts/MainLayout.jsx"
      to: "frontend/src/constants/breakpoints.js"
      via: "import BREAKPOINTS"
      pattern: "import.*BREAKPOINTS.*breakpoints"
---

<objective>
Refactor all authenticated/dashboard pages and shared components to use design tokens instead of hardcoded arbitrary values.

Purpose: Eliminate hardcoded colors, sizes, shadows, and border-radius values from the photographer-facing pages (MainLayout, Accordion, CollectionsListPage, CollectionDetailsPage, ProfilePage, PaymentsPage). After this plan, all authenticated pages use the centralized design token system.

Output: Six refactored files with zero hardcoded color/shadow/radius values (except legitimate one-off arbitrary values with comments and gradients).
</objective>

<execution_context>
@C:/Users/Marius/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Marius/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-design-system-foundation/11-01-SUMMARY.md
@frontend/tailwind.config.js
@frontend/src/constants/breakpoints.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Refactor MainLayout and Accordion to use design tokens</name>
  <files>
    frontend/src/layouts/MainLayout.jsx
    frontend/src/components/Accordion.jsx
  </files>
  <action>
**MainLayout.jsx refactoring:**

1. Replace local constants with shared breakpoints:
   - Remove: `const BREAKPOINT = 768;`
   - Add import: `import { BREAKPOINTS } from '../constants/breakpoints';`
   - Replace all `BREAKPOINT` references with `BREAKPOINTS.TABLET` (3 occurrences: useState init, handleResize comparison)
   - Keep `const SIDEBAR_WIDTH = 240;` — this is a layout-specific constant, not a design token

2. Replace hardcoded hex colors with semantic tokens:
   - `bg-[#f5f6fa]` → `bg-surface-light`
   - `bg-[#1a1a2e]` → `bg-surface-dark` (3 occurrences: header, sidebar)
   - `text-[#9ca3c4]` → `text-sidebar-text` (2 occurrences: close button, inactive nav)
   - `text-[#8b8fa8]` → `text-sidebar-text-dim` (user plan text)
   - `text-[#555e7a]` → `text-sidebar-footer` (copyright)

3. Replace hardcoded shadows with tokens:
   - `shadow-[0_2px_8px_rgba(0,0,0,0.3)]` → `shadow-lg` (mobile header — close enough at 0.12 opacity, darker shadow acceptable for dark header)
   - `shadow-[0_4px_12px_rgba(0,0,0,0.1)]` → `shadow-md` (language dropdown)

4. Replace hardcoded font sizes with tokens:
   - `text-[11px]` → `text-xs` (12px — acceptable 1px difference for consistency; used for plan text, footer)

5. Legitimate arbitrary values to KEEP (with inline comment):
   - `z-[1001]`, `z-[1002]`, `z-[1003]` — z-index stacking for mobile overlay system, no standard Tailwind equivalent needed
   - `border-l-[3px]` — active nav indicator, design-specific width
   - `border-white/[0.08]` — sidebar divider opacity, Tailwind opacity modifier syntax (not a hardcoded value)
   - `tracking-[0.5px]` — brand logo letter-spacing, unique to brand mark
   - `mt-[14px]`, `py-[14px]` — sidebar user section spacing (14px = between 3.5 and 4 on 4px grid; use `mt-3.5` / `py-3.5` instead which is 14px in Tailwind)
   - `min-w-[60px]` — language dropdown min-width, context-specific

6. Remap near-standard values:
   - `mt-[14px]` → `mt-3.5` (14px is standard Tailwind 3.5 = 0.875rem = 14px)
   - `py-[14px]` → `py-3.5` (same)

**Accordion.jsx refactoring:**

1. Replace hardcoded border-radius:
   - `rounded-[10px]` → `rounded` (DEFAULT = 10px from tokens)

2. Replace hardcoded font sizes:
   - `text-[14px]` → `text-sm` (14px matches sm token)

3. Legitimate arbitrary values to KEEP:
   - `tracking-[0.05em]` — uppercase label letter-spacing, design-specific
   - `max-h-[500px]` → keep as-is; this is a max-height for accordion animation, context-specific
  </action>
  <verify>
1. Run `npm run dev` — no compilation errors
2. Run `npm run lint` — zero warnings
3. Grep for `BREAKPOINT =` in MainLayout.jsx — should NOT find the old constant
4. Grep for `BREAKPOINTS.TABLET` in MainLayout.jsx — should find 3 occurrences
5. Grep for `bg-[#1a1a2e]` in MainLayout.jsx — should find 0 occurrences
6. Grep for `bg-[#f5f6fa]` in MainLayout.jsx — should find 0 occurrences
  </verify>
  <done>
- MainLayout uses BREAKPOINTS from shared constants file
- All repeated hex colors replaced with semantic token classes
- Shadows use token classes (shadow-md, shadow-lg)
- Font sizes use token classes where applicable
- Accordion uses rounded (DEFAULT) instead of rounded-[10px]
- Only legitimate one-off arbitrary values remain (z-index, border-width, opacity modifiers)
  </done>
</task>

<task type="auto">
  <name>Task 2: Refactor CollectionsListPage, CollectionDetailsPage, ProfilePage, and PaymentsPage</name>
  <files>
    frontend/src/pages/CollectionsListPage.jsx
    frontend/src/pages/CollectionDetailsPage.jsx
    frontend/src/pages/ProfilePage.jsx
    frontend/src/pages/PaymentsPage.jsx
  </files>
  <action>
Apply the following systematic replacements across ALL four files. These pages share common patterns (page headers, cards, buttons, form inputs, labels).

**Common pattern replacements (apply to all four files):**

1. **Card containers:**
   - `rounded-[10px]` → `rounded` (DEFAULT = 10px)

2. **Page width:**
   - `max-w-[720px]` → keep as-is; 720px is a page-specific layout constraint (45rem), not repeated enough across different contexts to warrant a token. Add comment `{/* page max-width */}` only if the file doesn't already make it obvious from context.

3. **Page header icon:**
   - `w-[52px] h-[52px]` → `w-13 h-13` (52px = 13 * 4px = Tailwind 13 on the standard scale)
   - `text-[22px]` → `text-xl` (22px = xl from Major Third scale)
   - `gap-[14px]` → `gap-3.5` (14px = Tailwind 3.5)

4. **Page title:**
   - `text-[22px]` → `text-xl` (22px matches xl token)

5. **Status badge:**
   - `text-[10px]` → keep as `text-[10px]`; 10px is between xs(12) and nothing — a deliberate smaller size for badges. Not worth a token for one pattern. Add brief comment if not obvious.

6. **Section labels / uppercase headers:**
   - `text-[11px]` → `text-xs` (12px — 1px larger, acceptable for consistency)
   - `tracking-[0.06em]` → keep as-is (custom tracking for uppercase labels)
   - `tracking-[0.05em]` → keep as-is (same pattern)

7. **Form labels:**
   - `text-[13px]` → `text-sm` (14px — 1px larger, acceptable for label consistency)
   - `mb-[5px]` → `mb-1` (4px — close to 5px, or `mb-1.5` = 6px. Use `mb-1` for tighter feel consistent with 8pt grid)

8. **Form inputs:**
   - `py-[9px]` → `py-2` (8px) or `py-2.5` (10px). Use `py-2.5` — closer to 9px, aligns to grid.
   - `px-[22px]` → `px-5` (20px) or `px-6` (24px). Use `px-5` — closer to 22px.
   - `text-[14px]` → `text-sm` (14px = sm token)
   - `border-[1.5px]` → keep as-is (custom border width for form focus states)
   - `rounded-[6px]` → `rounded-sm` (8px from tokens — 2px larger, acceptable; or keep as `rounded-[6px]` if pixel-perfect needed). Use `rounded-sm` for consistency.

9. **Button styles (gradient primary):**
   - `py-[9px] px-[22px]` → `py-2.5 px-5` (same as form input pattern)
   - `text-[14px]` → `text-sm`
   - `rounded-[6px]` → `rounded-sm`
   - `hover:opacity-[0.88]` → `hover:opacity-90` (90% is standard Tailwind, close enough to 88%)
   - Keep `bg-[linear-gradient(135deg,...)]` as-is (gradient pattern is legitimate)

10. **Error message boxes:**
    - `text-[13px]` → `text-sm`
    - `px-[14px]` → `px-3.5` (14px = Tailwind 3.5)
    - `rounded-[10px]` → `rounded`

11. **Photo grid cards:**
    - `rounded-[6px]` → `rounded-sm` (8px)
    - `gap-[18px]` → `gap-4` (16px) or `gap-5` (20px). Use `gap-4` — aligns to 8pt grid.

12. **Photo grid layout:**
    - `grid-cols-[repeat(auto-fill,minmax(180px,1fr))]` → keep as-is (responsive grid with specific min column width is layout-specific)

13. **Lightbox image:**
    - `max-w-[88vw] max-h-[88vh]` → keep as-is (viewport-relative sizing for lightbox)
    - `rounded-[4px]` → `rounded-sm` (8px is larger; alternatively keep as `rounded-[4px]`). Keep as `rounded-[4px]` with comment — lightbox image corners should be minimal.

14. **Collection card (Polaroid style):**
    - `rounded-[10px]` → `rounded`
    - `rotate-[0.5deg]` → keep as-is (Polaroid tilt effect, unique value)
    - `hover:rotate-[1.5deg]` → keep as-is (same)
    - `rounded-[5px]` → `rounded-sm` (8px)

15. **PaymentsPage specific hex colors:**
    - `text-[#111827]` → `text-gray-900` (gray-900 = #111827 exactly)
    - `text-[#6b7280]` → `text-gray-500` (gray-500 = #6b7280 exactly)
    - `text-[#374151]` → `text-gray-700` (gray-700 = #374151 exactly)
    - `border-[#e5e7eb]` → `border-gray-200` (gray-200 = #e5e7eb exactly)

16. **Dropzone / upload areas:**
    - `rounded-[10px]` → `rounded`

17. **CollectionDetailsPage InfoRow helper (top of file):**
    - `gap-[3px]` → `gap-1` (4px — 1px larger, aligns to 8pt grid)
    - Same for ProfilePage InfoRow helper

18. **Selected photo badge:**
    - `px-[6px] py-[2px]` → `px-1.5 py-0.5` (6px = 1.5, 2px = 0.5 — exact Tailwind values)
    - `text-[10px]` → keep as-is (badge size)

19. **CollectionsListPage card buttons:**
    - `text-[11px]` → `text-xs` (12px)
    - `rounded-[5px]` → `rounded-sm` (8px)
    - `mb-[5px]` → `mb-1`
  </action>
  <verify>
1. Run `npm run dev` — no compilation errors
2. Run `npm run build` — production build succeeds
3. Run `npm run lint` — zero warnings
4. Count remaining hardcoded patterns:
   - `grep -c "rounded-\[10px\]"` in all 4 files — should be 0
   - `grep -c "text-\[#"` in PaymentsPage.jsx — should be 0
   - `grep -c "bg-\[#"` in all 4 files — should be 0 (only gradient bg-[linear-gradient] allowed)
5. Remaining arbitrary values should only be: gradients, grid-cols, max-w-[720px], viewport units, rotate, tracking, text-[10px] badges, border-[1.5px], rounded-[4px] lightbox
  </verify>
  <done>
- All four authenticated pages use design token classes instead of hardcoded values
- Card containers use rounded (DEFAULT) instead of rounded-[10px]
- Buttons use py-2.5 px-5 text-sm rounded-sm instead of arbitrary pixel values
- PaymentsPage hex colors replaced with standard Tailwind gray-* classes
- Page headers use text-xl, w-13 h-13, gap-3.5 instead of arbitrary values
- Labels use text-xs/text-sm instead of text-[11px]/text-[13px]
- Only legitimate arbitrary values remain (gradients, grid layout, viewport units, rotations, badge sizes)
  </done>
</task>

</tasks>

<verification>
1. `npm run dev` starts without errors
2. `npm run build` succeeds
3. `npm run lint` passes with zero warnings
4. No `bg-[#` hex colors remain in any of the 6 files (except gradients)
5. No `rounded-[10px]` remains in any of the 6 files
6. No `shadow-[` remains in MainLayout.jsx
7. MainLayout imports BREAKPOINTS from shared constants
</verification>

<success_criteria>
- Six authenticated/shared component files refactored to use design tokens
- MainLayout uses shared BREAKPOINTS constant
- Zero hardcoded hex colors (replaced with semantic tokens or Tailwind palette)
- Zero hardcoded shadow values (replaced with shadow-sm/md/lg/xl tokens)
- Zero hardcoded rounded-[10px] (replaced with rounded DEFAULT)
- Only documented legitimate arbitrary values remain (gradients, z-index, viewport units, grid columns, rotations)
</success_criteria>

<output>
After completion, create `.planning/phases/11-design-system-foundation/11-02-SUMMARY.md`
</output>
