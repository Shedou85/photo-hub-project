---
phase: 15-workflow-enhancement
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/pages/CollectionsListPage.jsx
  - frontend/src/pages/CollectionDetailsPage.jsx
  - frontend/src/locales/en.json
  - frontend/src/locales/lt.json
  - frontend/src/locales/ru.json
autonomous: true

must_haves:
  truths:
    - "Creating a collection auto-navigates to the new collection's details page"
    - "'Start client selection' button is hidden when collection has 0 photos"
    - "Next-step guidance text displays below status badge per collection status"
    - "Empty state shows state-specific messaging instead of generic 'No photos yet'"
  artifacts:
    - path: "frontend/src/pages/CollectionsListPage.jsx"
      provides: "Auto-navigation after collection creation"
      contains: "useNavigate"
    - path: "frontend/src/pages/CollectionDetailsPage.jsx"
      provides: "Conditional start-selecting button, next-step guidance, state-specific empty state"
      contains: "nextStep"
    - path: "frontend/src/locales/en.json"
      provides: "i18n keys for next-step guidance and empty state messages"
      contains: "collection.nextStep"
  key_links:
    - from: "frontend/src/pages/CollectionsListPage.jsx"
      to: "/collection/:id route"
      via: "useNavigate after successful POST /collections"
      pattern: "navigate.*collection"
    - from: "frontend/src/pages/CollectionDetailsPage.jsx"
      to: "frontend/src/locales/en.json"
      via: "t() calls for nextStep and emptyState keys"
      pattern: "collection\\.nextStep"
---

<objective>
Implement quick workflow UX improvements: auto-navigation after collection creation, conditional "Start selection" button visibility, next-step guidance text, and state-specific empty states.

Purpose: These four changes address the most impactful UX gaps — photographers currently land on the collections list after creating a collection (instead of the details page), can trigger client selection with 0 photos, see no workflow guidance, and get generic empty state text regardless of collection phase.

Output: Updated CollectionsListPage with auto-navigate, updated CollectionDetailsPage with conditional UI, and new i18n keys in all 3 locales (EN/LT/RU).
</objective>

<execution_context>
@C:/Users/Marius/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Marius/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@frontend/src/pages/CollectionsListPage.jsx
@frontend/src/pages/CollectionDetailsPage.jsx
@frontend/src/locales/en.json
@frontend/src/locales/lt.json
@frontend/src/locales/ru.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add auto-navigation after collection creation and conditional start-selecting button</name>
  <files>
    frontend/src/pages/CollectionsListPage.jsx
    frontend/src/pages/CollectionDetailsPage.jsx
  </files>
  <action>
**CollectionsListPage.jsx — Auto-navigate (WORKFLOW-04):**

1. Add `useNavigate` import from `react-router-dom`:
   ```jsx
   import { useNavigate } from 'react-router-dom';
   ```

2. Add `const navigate = useNavigate();` inside the component function (after `useTranslation()`).

3. In `handleCreateCollection` (lines 54-90), after the successful creation response (`response.ok && data.status === "OK"`), add:
   ```jsx
   navigate(`/collection/${data.collection.id}`);
   ```
   Place it BEFORE `setNewCollectionName("")`. Remove the background collections list refresh (lines 73-79) since the user is navigating away — the list will refresh on next visit via the existing useEffect.

4. Keep the `toast.promise` pattern intact for loading/success/error feedback. The toast will persist across navigation.

**CollectionDetailsPage.jsx — Conditional start-selecting (WORKFLOW-03):**

5. In the Actions Card section (line 659), change the condition for the "Start client selection" button from:
   ```jsx
   {collection.status === 'DRAFT' && (
   ```
   to:
   ```jsx
   {collection.status === 'DRAFT' && photos.length > 0 && (
   ```
   This hides the button when there are no photos uploaded, preventing photographers from starting client selection on an empty collection.
  </action>
  <verify>
  - `npm run lint` from `frontend/` — zero errors
  - `npm run build` from `frontend/` — successful production build
  - Grep for `useNavigate` in CollectionsListPage.jsx returns a match
  - Grep for `photos.length > 0` near `startSelecting` in CollectionDetailsPage.jsx returns a match
  </verify>
  <done>
  - CollectionsListPage navigates to `/collection/{id}` after successful collection creation
  - "Start client selection" button only appears in DRAFT status when photos.length > 0
  </done>
</task>

<task type="auto">
  <name>Task 2: Add next-step guidance, state-specific empty states, and i18n keys</name>
  <files>
    frontend/src/pages/CollectionDetailsPage.jsx
    frontend/src/locales/en.json
    frontend/src/locales/lt.json
    frontend/src/locales/ru.json
  </files>
  <action>
**i18n keys — Add to ALL 3 locale files (en.json, lt.json, ru.json):**

Add the following keys inside the `"collection"` namespace:

**en.json:**
```json
"nextStep": {
  "DRAFT": "Next step: Upload photos and share with your client",
  "SELECTING": "Next step: Waiting for client to select photos",
  "REVIEWING": "Next step: Upload edited finals and mark as delivered",
  "DELIVERED": "Next step: Share the delivery link with your client",
  "DOWNLOADED": "Your client has downloaded the photos"
},
"emptyState": {
  "DRAFT": {
    "title": "No photos yet",
    "subtitle": "Upload photos to get started with this collection"
  },
  "SELECTING": {
    "title": "Waiting for selections",
    "subtitle": "Your client hasn't made any selections yet"
  },
  "REVIEWING": {
    "title": "Ready for editing",
    "subtitle": "Your client's selections are ready — upload the edited finals above"
  },
  "DELIVERED": {
    "title": "Photos delivered",
    "subtitle": "Your client can download the edited photos using the delivery link"
  }
}
```

**lt.json:**
```json
"nextStep": {
  "DRAFT": "Kitas žingsnis: Įkelkite nuotraukas ir pasidalinkite su klientu",
  "SELECTING": "Kitas žingsnis: Laukiama kliento pasirinkimų",
  "REVIEWING": "Kitas žingsnis: Įkelkite galutinius failus ir pažymėkite kaip pristatyta",
  "DELIVERED": "Kitas žingsnis: Pasidalinkite pristatymo nuoroda su klientu",
  "DOWNLOADED": "Klientas atsisiuntė nuotraukas"
},
"emptyState": {
  "DRAFT": {
    "title": "Nuotraukų dar nėra",
    "subtitle": "Įkelkite nuotraukas, kad pradėtumėte šią kolekciją"
  },
  "SELECTING": {
    "title": "Laukiama pasirinkimų",
    "subtitle": "Jūsų klientas dar nepasirinko nuotraukų"
  },
  "REVIEWING": {
    "title": "Paruošta redagavimui",
    "subtitle": "Kliento pasirinkimai paruošti — įkelkite galutinius failus aukščiau"
  },
  "DELIVERED": {
    "title": "Nuotraukos pristatytos",
    "subtitle": "Jūsų klientas gali atsisiųsti redaguotas nuotraukas naudodamas pristatymo nuorodą"
  }
}
```

**ru.json:**
```json
"nextStep": {
  "DRAFT": "Следующий шаг: Загрузите фото и поделитесь с клиентом",
  "SELECTING": "Следующий шаг: Ожидание выбора фотографий клиентом",
  "REVIEWING": "Следующий шаг: Загрузите финальные файлы и отметьте как доставлено",
  "DELIVERED": "Следующий шаг: Отправьте клиенту ссылку на доставку",
  "DOWNLOADED": "Клиент скачал фотографии"
},
"emptyState": {
  "DRAFT": {
    "title": "Фотографий пока нет",
    "subtitle": "Загрузите фотографии, чтобы начать работу с коллекцией"
  },
  "SELECTING": {
    "title": "Ожидание выбора",
    "subtitle": "Ваш клиент ещё не сделал выбор"
  },
  "REVIEWING": {
    "title": "Готово к редактированию",
    "subtitle": "Выбор клиента готов — загрузите финальные файлы выше"
  },
  "DELIVERED": {
    "title": "Фотографии доставлены",
    "subtitle": "Ваш клиент может скачать отредактированные фото по ссылке доставки"
  }
}
```

**CollectionDetailsPage.jsx — Next-step guidance (WORKFLOW-06):**

After the status badge section (around line 622, after the closing `</div>` of the header), add a guidance line below the header:

```jsx
{/* Next-step guidance (WORKFLOW-06) */}
<p className="text-sm text-gray-500 mb-5 -mt-4">
  {t(`collection.nextStep.${collection.status}`)}
</p>
```

Place this between the page header div (ends ~line 623) and the Collection Info Card (starts ~line 626). The `-mt-4` pulls it closer to the header for visual grouping.

**CollectionDetailsPage.jsx — State-specific empty state (WORKFLOW-07):**

Replace the current generic empty state (lines 897-904):
```jsx
{photos.length === 0 && !anyUploading && (
  <div className="bg-white border border-gray-200 rounded px-6 py-5 mb-5">
    <p className="m-0 text-sm text-gray-500 text-center py-5">
      {t("collection.noPhotos")}
    </p>
  </div>
)}
```

With a state-specific empty state:
```jsx
{photos.length === 0 && !anyUploading && (
  <div className="bg-white border border-gray-200 rounded px-6 py-5 mb-5">
    <div className="flex flex-col items-center justify-center py-8 text-center">
      <div className="w-14 h-14 rounded-full bg-gray-100 flex items-center justify-center mb-4">
        <svg className="w-7 h-7 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={1.5}>
          <path strokeLinecap="round" strokeLinejoin="round" d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909M3.75 21h16.5A2.25 2.25 0 0022.5 18.75V5.25A2.25 2.25 0 0020.25 3H3.75A2.25 2.25 0 001.5 5.25v13.5A2.25 2.25 0 003.75 21z" />
        </svg>
      </div>
      <h3 className="text-base font-semibold text-gray-800 mb-1">
        {t(`collection.emptyState.${collection.status}.title`, { defaultValue: t('collection.noPhotos') })}
      </h3>
      <p className="text-sm text-gray-500 m-0">
        {t(`collection.emptyState.${collection.status}.subtitle`, { defaultValue: '' })}
      </p>
    </div>
  </div>
)}
```

This uses an SVG photo icon instead of emoji, provides a title + subtitle pulled from status-specific i18n keys, and falls back to the existing generic message for any unmapped statuses (e.g., ARCHIVED).
  </action>
  <verify>
  - `npm run lint` from `frontend/` — zero errors
  - `npm run build` from `frontend/` — successful production build
  - Grep for `collection.nextStep` in CollectionDetailsPage.jsx returns a match
  - Grep for `collection.emptyState` in CollectionDetailsPage.jsx returns a match
  - Grep for `"nextStep"` in en.json, lt.json, ru.json — all 3 return matches
  - Grep for `"emptyState"` in en.json, lt.json, ru.json — all 3 return matches
  </verify>
  <done>
  - Next-step guidance text appears below page header, per collection status
  - Empty state shows status-specific title and subtitle with photo icon
  - All new i18n keys exist in en.json, lt.json, and ru.json
  - Existing "collection.noPhotos" key retained as fallback
  </done>
</task>

</tasks>

<verification>
- `npm run lint` — zero errors
- `npm run build` — successful production build
- CollectionsListPage imports and uses `useNavigate`
- "Start client selection" button is conditional on `photos.length > 0`
- Next-step guidance text uses `collection.nextStep.{STATUS}` i18n keys
- Empty state uses `collection.emptyState.{STATUS}.title` and `.subtitle` i18n keys
- All 3 locale files (en.json, lt.json, ru.json) have `nextStep` and `emptyState` keys
</verification>

<success_criteria>
1. Creating a collection redirects to `/collection/{id}` without full page reload
2. "Start client selection" button is invisible when photos.length === 0
3. Next-step guidance text changes per collection status (DRAFT/SELECTING/REVIEWING/DELIVERED/DOWNLOADED)
4. Empty state shows different title + subtitle per status instead of generic "No photos yet"
5. Zero lint errors, production build succeeds
6. All 3 locales have complete translations for new keys
</success_criteria>

<output>
After completion, create `.planning/phases/15-workflow-enhancement/15-01-SUMMARY.md`
</output>
