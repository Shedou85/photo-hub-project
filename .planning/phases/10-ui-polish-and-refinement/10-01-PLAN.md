---
phase: 10-ui-polish-and-refinement
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/pages/CollectionDetailsPage.jsx
  - frontend/src/pages/SharePage.jsx
  - frontend/src/pages/CollectionsListPage.jsx
  - frontend/src/locales/en.json
  - frontend/src/locales/lt.json
  - frontend/src/locales/ru.json
autonomous: true

must_haves:
  truths:
    - "Upload dropzone is hidden when collection has photos, replaced by compact 'Add More Photos' button"
    - "Collection details page buttons are grouped into workflow-phase sections (Upload, Share, Review, Deliver)"
    - "SharePage submit CTA uses fixed bottom bar with selection count and prominent button"
    - "Collection cards on list page show DELIVERED and DOWNLOADED border highlights"
    - "All new UI text has translations in EN, LT, and RU locale files"
  artifacts:
    - path: "frontend/src/pages/CollectionDetailsPage.jsx"
      provides: "Progressive disclosure dropzone + workflow-phase button grouping"
      contains: "addMorePhotos"
    - path: "frontend/src/pages/SharePage.jsx"
      provides: "Improved fixed bottom CTA bar"
      contains: "fixed bottom-0"
    - path: "frontend/src/pages/CollectionsListPage.jsx"
      provides: "DELIVERED and DOWNLOADED border colors in STATUS_BORDER"
      contains: "DELIVERED"
    - path: "frontend/src/locales/en.json"
      provides: "English translations for new UI strings"
      contains: "addMorePhotos"
    - path: "frontend/src/locales/lt.json"
      provides: "Lithuanian translations for new UI strings"
      contains: "addMorePhotos"
    - path: "frontend/src/locales/ru.json"
      provides: "Russian translations for new UI strings"
      contains: "addMorePhotos"
  key_links:
    - from: "frontend/src/pages/CollectionDetailsPage.jsx"
      to: "frontend/src/locales/en.json"
      via: "t('collection.addMorePhotos') and workflow phase heading keys"
      pattern: "collection\\.addMorePhotos|collection\\.uploadPhase"
    - from: "frontend/src/pages/CollectionsListPage.jsx"
      to: "STATUS_BORDER constant"
      via: "Object lookup for card border color"
      pattern: "DELIVERED.*border|DOWNLOADED.*border"
---

<objective>
Apply UI polish to the photographer dashboard (CollectionDetailsPage), client share page (SharePage), and collections list (CollectionsListPage) to improve workflow clarity and visual consistency.

Purpose: Complete Phase 10 (final v2.0 phase) by implementing progressive disclosure for the upload dropzone, reorganizing action buttons by workflow phase, improving the client CTA layout, and ensuring status badge/border consistency for DELIVERED and DOWNLOADED statuses.

Output: Updated CollectionDetailsPage with progressive disclosure and grouped buttons, improved SharePage CTA, consistent CollectionsListPage card borders, and i18n keys in all 3 locales.
</objective>

<execution_context>
@C:/Users/Marius/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Marius/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@frontend/src/pages/CollectionDetailsPage.jsx
@frontend/src/pages/SharePage.jsx
@frontend/src/pages/CollectionsListPage.jsx
@frontend/src/locales/en.json
@frontend/src/locales/lt.json
@frontend/src/locales/ru.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Progressive disclosure dropzone and workflow-phase button grouping on CollectionDetailsPage</name>
  <files>
    frontend/src/pages/CollectionDetailsPage.jsx
    frontend/src/locales/en.json
    frontend/src/locales/lt.json
    frontend/src/locales/ru.json
  </files>
  <action>
    **1. Progressive disclosure for upload dropzone (UIPOL-01, UIPOL-02):**

    In CollectionDetailsPage.jsx, modify the "Upload Card" section (currently lines 688-748). Replace the always-visible dropzone with conditional rendering:

    - When `photos.length === 0`: Show the full dropzone (existing large dashed-border area with drag-and-drop support, upload icon, label text, and hint). Keep all existing event handlers (onDrop, onDragOver, onDragLeave) and aria attributes.
    - When `photos.length > 0`: Show a compact "Add More Photos" button instead. Style: `inline-flex items-center gap-2 py-[9px] px-[22px] text-[14px] font-semibold text-blue-600 bg-blue-50 border border-blue-200 rounded-[6px] hover:bg-blue-100 transition-colors cursor-pointer font-sans`. Include a small plus SVG icon (w-4 h-4) and text `t('collection.addMorePhotos')`. The button onClick triggers `fileInputRef.current?.click()`.

    CRITICAL: The hidden `<input ref={fileInputRef} type="file" ...>` must remain OUTSIDE the conditional block (it currently is at line 740-747, which is fine). Ensure it's not accidentally nested inside the conditional. The upload status indicators (anyUploading, uploadErrors, validationErrors) should still display below the button when active.

    **2. Workflow-phase button grouping (UIPOL-03):**

    Replace the current "Collection Info Card" (lines 624-685) with workflow-phase grouped sections. Remove the existing flat button row (`<div className="mt-4 flex gap-3">` at line 639) and replace the entire card with organized sections:

    The current info card combines collection metadata (createdAt, status) with action buttons. Restructure as:

    a) **Collection Info Card** (keep existing structure but remove the buttons from it):
       - Keep the card with createdAt and status InfoRows (lines 625-638)
       - Remove the `<div className="mt-4 flex gap-3">` and all buttons inside it (lines 639-684)

    b) **Actions section** — Group buttons in a single card with labeled sections. Use a single white card (`bg-white border border-gray-200 rounded-[10px] px-6 py-5 mb-5`) containing:

       - **Share section** (always visible): Heading `t('collection.sharePhase')` styled as `text-[11px] font-semibold tracking-[0.06em] uppercase text-gray-400 mb-3`. Contains:
         - Copy Share Link button (existing gradient style)
         - "Start client selection" button (only when status === 'DRAFT')

       - **Review section** (only when status === 'REVIEWING'): Heading `t('collection.reviewPhase')`. Contains:
         - "Mark as Delivered" button (existing green gradient style, disabled when editedPhotos.length === 0)

       - **Deliver section** (only when status === 'DELIVERED' or 'DOWNLOADED'): Heading `t('collection.deliverPhase')`. Contains:
         - Copy Delivery Link button (existing green gradient style)

       Use `space-y-4` between sections within the card. Each section gets the heading + `flex gap-3 flex-wrap` for its buttons.

    **3. i18n keys to add:**

    Add to `collection` namespace in all 3 locale files:
    - `"addMorePhotos"`: EN: "Add More Photos", LT: "Pridėti daugiau nuotraukų", RU: "Добавить ещё фото"
    - `"sharePhase"`: EN: "Share", LT: "Bendrinimas", RU: "Поделиться"
    - `"reviewPhase"`: EN: "Review", LT: "Peržiūra", RU: "Проверка"
    - `"deliverPhase"`: EN: "Deliver", LT: "Pristatymas", RU: "Доставка"
  </action>
  <verify>
    Run `cd frontend && npm run build` — build succeeds with no errors.
    Grep for `addMorePhotos` in CollectionDetailsPage.jsx to confirm progressive disclosure code exists.
    Grep for `sharePhase` in all 3 locale files to confirm i18n keys are present.
  </verify>
  <done>
    Upload dropzone shows full dashed-border area when collection has 0 photos; shows compact blue "Add More Photos" button when photos exist. Action buttons are grouped into labeled sections (Share / Review / Deliver) within a single card. File input remains outside conditional block. All 4 new i18n keys exist in en.json, lt.json, ru.json.
  </done>
</task>

<task type="auto">
  <name>Task 2: SharePage CTA improvement and CollectionsListPage status border consistency</name>
  <files>
    frontend/src/pages/SharePage.jsx
    frontend/src/pages/CollectionsListPage.jsx
    frontend/src/locales/en.json
    frontend/src/locales/lt.json
    frontend/src/locales/ru.json
  </files>
  <action>
    **1. SharePage CTA improvement (UIPOL-04):**

    In SharePage.jsx, update the submit selections section (currently lines 267-278). Change from `sticky bottom-0` to `fixed bottom-0 left-0 right-0` for a true fixed bottom bar. Add a two-column layout with selection count on the left and button on the right:

    Replace the current sticky div with:
    ```jsx
    <div className="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 py-4 px-6 shadow-[0_-4px_12px_rgba(0,0,0,0.08)] z-40">
      <div className="max-w-[720px] mx-auto flex flex-col sm:flex-row items-center justify-between gap-3">
        <div className="text-sm font-semibold text-gray-700">
          {t('share.selectedCount', { count: selectedPhotoIds.size })}
        </div>
        <button
          onClick={submitSelections}
          disabled={isSubmitting}
          className="w-full sm:w-auto bg-[linear-gradient(135deg,#3b82f6_0%,#6366f1_100%)] text-white font-semibold text-base py-[14px] px-8 rounded-[10px] hover:shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 cursor-pointer border-none font-sans"
        >
          {isSubmitting ? t('share.submitting') : t('share.submitSelections', { count: selectedPhotoIds.size })}
        </button>
      </div>
    </div>
    ```

    Also add `pb-24` to the main content container's `className` (the `<div className="max-w-[720px] mx-auto py-10 px-6">` at line 187) WHEN selections exist and the bar is visible, to prevent the fixed bar from overlapping content. Use conditional className: `max-w-[720px] mx-auto py-10 px-6 ${canSelect && selectedPhotoIds.size > 0 && !isSubmitted ? 'pb-24' : ''}`

    Remove the `|| 'Submitting...'` fallback from the submitting text (line 275) — it's unnecessary since i18n key exists.

    **2. CollectionsListPage status border consistency (UIPOL-05):**

    In CollectionsListPage.jsx, update the `STATUS_BORDER` constant (lines 18-21) to include DELIVERED and DOWNLOADED statuses:

    ```javascript
    const STATUS_BORDER = {
      SELECTING: 'border-2 border-blue-500',
      REVIEWING: 'border-2 border-green-500',
      DELIVERED: 'border-2 border-purple-500',
      DOWNLOADED: 'border-2 border-purple-600',
    };
    ```

    This ensures collection cards have colored borders for all active lifecycle states (not just SELECTING and REVIEWING).

    **3. No new i18n keys needed for this task** — SharePage already has `share.selectedCount`, `share.submitSelections`, and `share.submitting` keys in all locales. CollectionsListPage already has `collections.status.DOWNLOADED` and `collections.status.DELIVERED`.
  </action>
  <verify>
    Run `cd frontend && npm run build` — build succeeds with no errors.
    Grep for `fixed bottom-0` in SharePage.jsx to confirm fixed bar.
    Grep for `DELIVERED` in CollectionsListPage.jsx STATUS_BORDER to confirm border colors.
  </verify>
  <done>
    SharePage submit CTA uses fixed bottom bar with selection count on left and gradient button on right, responsive layout (stacked on mobile, inline on desktop). CollectionsListPage STATUS_BORDER includes DELIVERED (purple-500 border) and DOWNLOADED (purple-600 border). Build passes without errors.
  </done>
</task>

</tasks>

<verification>
1. `cd frontend && npm run build` — succeeds with no errors
2. CollectionDetailsPage shows conditional dropzone/button rendering based on photos.length
3. CollectionDetailsPage has grouped action sections with Share/Review/Deliver headings
4. SharePage has fixed bottom CTA bar with two-column layout
5. CollectionsListPage STATUS_BORDER has all 4 active statuses (SELECTING, REVIEWING, DELIVERED, DOWNLOADED)
6. All new i18n keys (addMorePhotos, sharePhase, reviewPhase, deliverPhase) present in en.json, lt.json, ru.json
7. `cd frontend && npm run lint` — passes with no errors
</verification>

<success_criteria>
- UIPOL-01: Upload dropzone conditionally hidden when photos.length > 0
- UIPOL-02: "Add More Photos" button visible when photos exist, triggers file input
- UIPOL-03: Buttons organized into Share/Review/Deliver workflow sections
- UIPOL-04: Fixed bottom CTA bar on SharePage with count + button
- UIPOL-05: STATUS_BORDER includes DELIVERED and DOWNLOADED with purple border colors
- All UI text uses i18n — no hardcoded strings
- Build and lint pass
</success_criteria>

<output>
After completion, create `.planning/phases/10-ui-polish-and-refinement/10-01-SUMMARY.md`
</output>
